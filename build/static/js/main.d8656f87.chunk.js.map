{"version":3,"sources":["Components/Filter.js","Components/PersonForm.js","Components/Persons.js","Components/Notification.js","Components/services/persons.js","App.js","reportWebVitals.js","index.js"],"names":["Filter","props","console","log","handler","onChange","value","PersonForm","persons","nameHandler","numberHandler","type","onClick","addPerson","Persons","person","name","number","deletePerson","i","Notification","message","addMessage","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","setPersons","useEffect","useService","length","newName","setNewName","newPhoneNumber","setNewPhoneNumber","filter","setFilter","errorMessage","setErrorMessage","setAddMessage","style","margin","event","target","preventDefault","personObject","checkName","map","allname","index","includes","window","confirm","newPerson","changedPerson","toUpdateId","setTimeout","catch","error","n","alert","concat","toLowerCase","open","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d8656f87.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = (props) => {\n  console.log(props.handler);\n\n  return (\n    <div>\n      <p>\n        {\" \"}\n        Filter: <input onChange={props.handler} value={props.value} />\n      </p>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n  console.log(props.persons);\n\n  return (\n    <div>\n      <form>\n        Name: <input onChange={props.nameHandler} />\n        <p>\n          Phone no: <input onChange={props.numberHandler} />\n        </p>\n        <button type=\"submit\" onClick={props.addPerson}>\n          ADD\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = (props) => {\n  console.log(props.person);\n\n  return (\n    <div>\n      <li key={props.i}>\n        {props.person.name}: {props.person.number}\n        <button onClick={props.deletePerson}>delete</button>\n      </li>\n    </div>\n  );\n};\n\nexport default Persons;\n","const Notification = ({ message, addMessage }) => {\n  if (message === null && addMessage === null) {\n    return null;\n  } else if ((message !== null, addMessage === null))\n    return <div className=\"error\">{message}</div>;\n  else if (addMessage !== null && message === null)\n    return <div className=\"addMessage\">{addMessage}</div>;\n};\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePersons = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\n// eslint-disable-next-line\nexport default {\n  getAll,\n  create,\n  update,\n  deletePersons,\n};\n","import \"./App.css\";\nimport \"./index.css\";\nimport React, { useState, useEffect } from \"react\";\nimport Filter from \"./Components/Filter\";\nimport PersonForm from \"./Components/PersonForm\";\nimport Persons from \"./Components/Persons\";\nimport Notification from \"./Components/Notification\";\n\nimport axios from \"axios\";\nimport useService from \"./Components/services/persons\";\n\nconst App = (props) => {\n  const [persons, setPersons] = useState([]);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    useService.getAll().then((response) => {\n      console.log(\"promise fulfilled\");\n      setPersons(response);\n    });\n  }, []);\n  console.log(\"render\", persons.length, \"notes\");\n\n  const [newName, setNewName] = useState(\"\");\n  const [newPhoneNumber, setNewPhoneNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [addMessage, setAddMessage] = useState(null);\n\n  const nameHandler = (event) => setNewName(event.target.value);\n\n  const numberHandler = (event) => setNewPhoneNumber(event.target.value);\n\n  const filterHandler = (event) => setFilter(event.target.value);\n\n  console.log(newPhoneNumber);\n  console.log(newName);\n\n  const deletePersonOf = (id, name) => {\n    let confirms = window.confirm(\"Press ok to delete  \" + name);\n    confirms === true\n      ? useService.deletePersons(id).then((response) => {\n          console.log(response);\n          setPersons(persons.filter((person) => person.id !== id));\n        })\n      : alert(name + \"was not deleted\");\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newPhoneNumber,\n    };\n    const checkName = persons.map((allname, index) => {\n      console.log(persons);\n      console.log(allname);\n      return allname.name;\n    });\n\n    if (!checkName.includes(newName) && newName !== \"\") {\n      useService\n        .create(personObject)\n        .then((response) => {\n          setPersons(persons.concat(response));\n          setAddMessage(`Added ${newName}`);\n          setTimeout(() => {\n            setAddMessage(null);\n            console.log(setAddMessage);\n          }, 5000);\n\n          console.log(response);\n        })\n        .catch((error) => {\n          // this is the way to access the error message\n          setErrorMessage(error.response.data.error);\n\n          setTimeout(() => {\n            setErrorMessage(null);\n            console.log(error.response.data.error);\n          }, 5000);\n        });\n    } else if (checkName.includes(newName)) {\n      let confirms = window.confirm(\n        \"Do you want to change the phone number of \" + newName + \" ?\"\n      );\n\n      if (confirms === true) {\n        const newPerson = persons.filter(\n          (person) => person.name === newName\n        )[0];\n\n        //duplicate object with same id created with the new phone number\n        const changedPerson = { ...newPerson, number: newPhoneNumber };\n\n        //id of the object to be update\n        const toUpdateId = newPerson.id;\n\n        useService\n          .update(toUpdateId, changedPerson)\n          .then((response) => {\n            console.log(response);\n            setPersons(\n              persons.map((person) =>\n                person.id !== toUpdateId ? person : response\n              )\n            );\n            setErrorMessage(` ${newName}'s phone number updated`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n            console.log(persons);\n          })\n          .catch((error) => {\n            setErrorMessage(\n              `Information of '${changedPerson.name}' has already been removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n              console.log(errorMessage);\n            }, 5000);\n            setPersons(persons.filter((n) => n.id !== toUpdateId));\n          });\n      } else alert(\"something went wrong\");\n    }\n  };\n  console.log(persons);\n  console.log(errorMessage);\n  return (\n    <div style={{ margin: \"auto\" }}>\n      <h1>Phonebook:</h1>\n      <Notification message={errorMessage} addMessage={addMessage} />\n      <Filter handler={filterHandler} />\n      <h1>Add a new:</h1>\n      <PersonForm\n        persons={persons}\n        nameHandler={nameHandler}\n        numberHandler={numberHandler}\n        addPerson={addPerson}\n      />\n      <h1>Persons and Numbers:</h1>\n      <ul className=\"persons\">\n        {persons\n          .filter((name) => name.name.toLowerCase().includes(filter))\n          .map((open, i) => (\n            <Persons\n              key={i}\n              person={open}\n              deletePerson={() => deletePersonOf(open.id, open.name)}\n            />\n          ))}\n      </ul>\n\n      <div></div>\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}