(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t.n(o),r=t(16),l=t.n(r),s=(t(7),t(6)),u=t(3),a=(t(21),t(0)),i=function(e){return console.log(e.handler),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[" ","Filter: ",Object(a.jsx)("input",{onChange:e.handler,value:e.value})]})})},d=function(e){return console.log(e.persons),Object(a.jsx)("div",{children:Object(a.jsxs)("form",{children:["Name: ",Object(a.jsx)("input",{onChange:e.nameHandler}),Object(a.jsxs)("p",{children:["Phone no: ",Object(a.jsx)("input",{onChange:e.numberHandler})]}),Object(a.jsx)("button",{type:"submit",onClick:e.addPerson,children:"ADD"})]})})},j=function(e){return console.log(e.person),Object(a.jsx)("div",{children:Object(a.jsxs)("li",{children:[e.person.name,": ",e.person.number,Object(a.jsx)("button",{onClick:e.deletePerson,children:"delete"})]},e.i)})},f=function(e){var n=e.message,t=e.addMessage;return null===n&&null===t?null:null===t?Object(a.jsx)("div",{className:"error",children:n}):null!==t&&null===n?Object(a.jsx)("div",{className:"addMessage",children:t}):void 0},b=t(4),h=t.n(b),g="http://localhost:3001/api/persons",O=function(){return h.a.get(g).then((function(e){return e.data}))},m=function(e){return h.a.post(g,e).then((function(e){return e.data}))},p=function(e,n){return h.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return h.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=Object(o.useState)([]),t=Object(u.a)(n,2),c=t[0],r=t[1];Object(o.useEffect)((function(){console.log("effect"),O().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("render",c.length,"notes");var l=Object(o.useState)(""),b=Object(u.a)(l,2),h=b[0],g=b[1],v=Object(o.useState)(""),w=Object(u.a)(v,2),P=w[0],C=w[1],k=Object(o.useState)(""),S=Object(u.a)(k,2),y=S[0],D=S[1],F=Object(o.useState)(null),N=Object(u.a)(F,2),H=N[0],M=N[1],T=Object(o.useState)(null),A=Object(u.a)(T,2),I=A[0],L=A[1];console.log(P),console.log(h);return console.log(c),console.log(H),Object(a.jsxs)("div",{style:{margin:"auto"},children:[Object(a.jsx)("h1",{children:"Phonebook:"}),Object(a.jsx)(f,{message:H,addMessage:I}),Object(a.jsx)(i,{handler:function(e){return D(e.target.value)}}),Object(a.jsx)("h1",{children:"Add a new:"}),Object(a.jsx)(d,{persons:c,nameHandler:function(e){return g(e.target.value)},numberHandler:function(e){return C(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:h,number:P},t=c.map((function(e,n){return console.log(c),console.log(e),e.name}));if(t.includes(h)||""===h){if(t.includes(h)){if(!0===window.confirm("Do you want to change the phone number of "+h+" ?")){var o=c.filter((function(e){return e.name===h}))[0],l=Object(s.a)(Object(s.a)({},o),{},{number:P}),u=o.id;p(u,l).then((function(e){console.log(e),r(c.map((function(n){return n.id!==u?n:e}))),console.log(c)})).catch((function(e){M("Information of '".concat(l.name,"' has already been removed from server")),setTimeout((function(){M(null),console.log(H)}),5e3),r(c.filter((function(e){return e.id!==u})))}))}else alert("something went wrong")}}else m(n).then((function(e){r(c.concat(e)),L("Added ".concat(h)),setTimeout((function(){L(null),console.log(L)}),5e3),console.log(e)}))}}),Object(a.jsx)("h1",{children:"Persons and Numbers:"}),Object(a.jsx)("ul",{className:"persons",children:c.filter((function(e){return e.name.toLowerCase().includes(y)})).map((function(e,n){return Object(a.jsx)(j,{person:e,deletePerson:function(){return n=e.id,t=e.name,void(!0===window.confirm("Press ok to delete  "+t)?x(n).then((function(e){console.log(e),r(c.filter((function(e){return e.id!==n})))})):alert(t+"was not deleted"));var n,t}},n)}))}),Object(a.jsx)("div",{})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,l=n.getTTFB;t(e),o(e),c(e),r(e),l(e)}))};l.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),w()},7:function(e,n,t){}},[[41,1,2]]]);
//# sourceMappingURL=main.71794d85.chunk.js.map